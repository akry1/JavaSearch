Code listing 10.1: HelloWorld.java<br /><br /><br /> 1 public class HelloWorld {<br /> 2  private native void print();<br /> 3 <br /> 4  public static void main(String[] args) {<br /> 5   new HelloWorld().print();<br /> 6  }<br /> 7 <br /> 8  static {<br /> 9   System.loadLibrary("HelloWorld");<br />10  }<br />11 }<br /><br /><br /><br /><br />HelloWorld.h<br /><br /><br />/* DO NOT EDIT THIS FILE - it is machine generated */<br />#include <jni.h><br />/* Header for class HelloWorld */<br /><br />#ifndef _Included_HelloWorld<br />#define _Included_HelloWorld<br />#ifdef __cplusplus<br />extern "C" {<br />#endif<br />/*<br /> * Class:     HelloWorld<br /> * Method:    print<br /> * Signature: ()V<br /> */<br />JNIEXPORT void JNICALL Java_HelloWorld_print<br />  (JNIEnv *, jobject);<br /><br />#ifdef __cplusplus<br />}<br />#endif<br />#endif<br /><br />libHelloWorld.c<br /><br /><br /> #include <stdio.h><br /> #include "HelloWorld.h"<br /><br /> JNIEXPORT void JNICALL<br /> Java_HelloWorld_print(JNIEnv *env, jobject obj)<br /> {<br />     printf("Hello World!\n");<br />     return;<br /> }<br /><br />make.sh<br /><br /><br />#!/bin/sh<br /><br /># openbsd 4.9<br /># gcc 4.2.1<br /># openjdk 1.7.0<br />JAVA_HOME=$(readlink -f /usr/bin/javac | sed "s:bin/javac::")<br />export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:.<br />javac HelloWorld.java<br />javah HelloWorld<br />gcc -I${JAVA_HOME}/include -shared libHelloWorld.c -o libHelloWorld.so<br />java HelloWorld<br /><br /><br /><br /><br />Commands to execute on POSIX<br /><br />chmod +x make.sh<br />./make.sh